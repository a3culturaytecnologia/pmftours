<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="PMF Tours - Transporte privado y tours aut√©nticos en Panam√°.">
    <title>PMF Tours - Tu puerta a Panam√° | Transporte y Tours Privados</title>

    <!-- Favicons -->
    <link rel="icon" type="image/svg+xml" href="./image/favicon/favicon.svg">

    <!-- Preconnect para fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">

    <!-- Boxicons -->
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="./css/kia-animation.css">

    <!-- AOS - SOLO EN DESKTOP para mejor performance -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" media="(min-width: 769px)">

    <style>
        /* Critical CSS - Inline para faster loading */
        body { margin: 0; padding: 0; }
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        /* WhatsApp flotante - Aparece inmediatamente */
        .floating-whatsapp {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: #25D366;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);
            z-index: 999999;
            text-decoration: none;
            opacity: 1;
            visibility: visible;
        }
        .floating-whatsapp i {
            font-size: 32px;
            color: #ffffff;
        }
    </style>
</head>

<body>
    <!-- HEADER -->
    <header class="header" id="header">
        <div class="nav-container">
            <div class="logo-container">
                <img src="./image/logo.png" alt="PMF Tours Logo" class="logo-image" width="140">
                <span class="logo-text">PMF TOURS</span>
            </div>

            <div class="nav-links">
                <a href="#inicio" data-translate="navHome">Inicio</a>
                <a href="#nosotros" data-translate="navAbout">Nosotros</a>
                <a href="#servicios" data-translate="navServices">Servicios</a>
                <a href="#galeria" data-translate="navGallery">Galer√≠a</a>
                <a href="#testimonios" data-translate="navTestimonials">Testimonios</a>

                <div class="language-switcher">
                    <button class="lang-btn" id="langBtn" type="button">
                        <span id="currentLang">ES</span>
                        <i class="bx bx-chevron-down"></i>
                    </button>
                    <div class="lang-dropdown" id="langDropdown">
                        <a href="#" class="lang-option" data-lang="es">üá™üá∏ Espa√±ol</a>
                        <a href="#" class="lang-option" data-lang="en">üá∫üá∏ English</a>
                    </div>
                </div>

                <a href="https://wa.me/50765347412?text=¬°Hola!%20Estoy%20interesado%20en%20conocer%20m√°s%20sobre%20los%20tours%20de%20PMF%20Tours.%20¬øMe%20puedes%20ayudar?"
                   class="btn-whatsapp-nav"
                   id="headerWhatsApp"
                   data-lang-es="https://wa.me/50765347412?text=¬°Hola!%20Estoy%20interesado%20en%20conocer%20m√°s%20sobre%20los%20tours%20de%20PMF%20Tours.%20¬øMe%20puedes%20ayudar?"
                   data-lang-en="https://wa.me/50765347412?text=Hi!%20I'm%20interested%20in%20learning%20more%20about%20PMF%20Tours.%20Can%20you%20help%20me?"
                   target="_blank"
                   rel="noopener noreferrer">
                    <i class="bx bxl-whatsapp"></i>
                    WhatsApp
                </a>
            </div>

            <button class="mobile-menu-toggle" id="mobileMenuToggle" type="button" aria-label="Toggle mobile menu">
                <span></span><span></span><span></span>
            </button>
        </div>
    </header>

    <!-- HERO -->
    <section class="hero" id="inicio">
        <div class="hero-slider">
            <div class="hero-slide active">
                <img src="./image/Hero.png" alt="Panam√° Ciudad" width="1920" loading="eager">
            </div>
            <div class="hero-slide">
                <img src="./image/gallery/casco-viejo.png" alt="Casco Antiguo" width="1920" loading="lazy">
            </div>
            <div class="hero-slide">
                <img src="./image/tours/Playa.png" alt="Playa en Panam√°" width="1920" loading="lazy">
            </div>
        </div>
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1 class="hero-title" data-translate="heroTitle">Tu puerta a Panam√°</h1>
            <p class="hero-subtitle" data-translate="heroSubtitle">Transporte y tours privados con seguridad, puntualidad y experiencias aut√©nticas.</p>
            <div class="hero-buttons">
                <a href="https://wa.me/50765347412" id="heroReservar" class="btn btn-primary" target="_blank" rel="noopener noreferrer">
                    <i class="bx bxl-whatsapp"></i>
                    <span data-translate="heroBtn1">Reservar Tour</span>
                </a>
                <a href="#servicios" class="btn btn-secondary">
                    <i class="bx bx-package"></i>
                    <span data-translate="heroBtn2">Ver Paquetes</span>
                </a>
            </div>
        </div>
    </section>

    <!-- C√ìMO FUNCIONA -->
    <section class="section how-it-works" id="como-funciona">
        <div class="section-container">
            <div class="section-header">
                <span class="section-label" data-translate="howItWorksLabel">Proceso Simple</span>
                <h2 class="section-title" data-translate="howItWorksTitle">¬øC√≥mo funciona PMF Tours?</h2>
            </div>
            <div class="steps-grid">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3 data-translate="step1Title">Escr√≠benos por WhatsApp</h3>
                        <p data-translate="step1Desc">Cu√©ntanos tus planes, fechas y lo que buscas. Estamos 24/7.</p>
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3 data-translate="step2Title">Confirmamos y personalizamos</h3>
                        <p data-translate="step2Desc">Te enviamos detalles, ruta, horarios y precio fijo en minutos.</p>
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3 data-translate="step3Title">Te recogemos a tiempo</h3>
                        <p data-translate="step3Desc">Puntual, con cartel y sonrisa. Incluso si tu vuelo se retrasa.</p>
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3 data-translate="step4Title">Disfruta sin preocupaciones</h3>
                        <p data-translate="step4Desc">Transporte c√≥modo, gu√≠a local y flexibilidad total durante tu tour.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- NOSOTROS - ACTUALIZADO CON TODAS LAS TRADUCCIONES FUNCIONANDO -->
    <section class="section about" id="nosotros">
        <div class="section-container">
            <div class="section-header">
                <span class="section-label" data-translate="aboutLabel">Con√≥cenos</span>
                <h2 class="section-title" data-translate="aboutTitle">Sobre PMF Tours</h2>
            </div>

            <div class="about-content-grid">
                <div class="about-text">
                    <!-- ‚úÖ TEXTO DESTACADO - CON TRADUCCI√ìN -->
                    <p class="about-paragraph about-paragraph-highlight">
                        <strong data-translate="aboutHighlightText">Fundada por Pierre Flores, de la Tierra del Canal, 100% Paname√±o apasionado por su pa√≠s y sus costumbres y cultura.</strong>
                    </p>

                    <p class="about-paragraph" data-translate="aboutDesc">
                        Somos una empresa local dedicada al transporte privado y tours personalizados en Panam√°. Ofrecemos experiencias aut√©nticas que te conectan con la verdadera esencia de nuestro pa√≠s.
                    </p>

                    <!-- ‚úÖ VALORES ACTUALIZADOS - CADA TEXTO CON TRADUCCI√ìN -->
                    <div class="about-values">
                        <h3 class="values-title" data-translate="valuesTitle">Nuestros Valores</h3>
                        <div class="values-grid">
                            <div class="value-item">
                                <i class="bx bx-shield-alt-2"></i>
                                <span data-translate="valueSecurity">Seguridad</span>
                            </div>
                            <div class="value-item">
                                <i class="bx bx-time-five"></i>
                                <span data-translate="valuePunctuality">Puntualidad</span>
                            </div>
                            <div class="value-item">
                                <i class="bx bx-check-shield"></i>
                                <span data-translate="valueHonesty">Honestidad</span>
                            </div>
                            <div class="value-item">
                                <i class="bx bx-heart"></i>
                                <span data-translate="valueTrust">Confianza</span>
                            </div>
                        </div>
                    </div>

                    <a href="https://wa.me/50765347412" id="aboutContactar" class="btn btn-primary" target="_blank" rel="noopener noreferrer">
                        <i class="bx bxl-whatsapp"></i>
                        <span data-translate="aboutCTA">Contactar a Pierre</span>
                    </a>
                </div>

                <div class="about-image">
                    <div class="pierre-card">
                        <img src="./image/pierre-flores.png" alt="Pierre Flores - Fundador de PMF Tours" width="460" height="500" loading="lazy">
                        <div class="pierre-badge">
                            <span class="badge-flag">üáµüá¶</span>
                            <span class="badge-text" data-translate="aboutBadge">Paname√±o de coraz√≥n</span>
                        </div>
                        <div class="pierre-info">
                            <h3>Pierre Flores</h3>
                            <p data-translate="aboutPierreTitle">Fundador</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SERVICIOS -->
    <section class="section services" id="servicios">
        <div class="section-container">
            <div class="section-header">
                <span class="section-label" data-translate="servicesLabel">Nuestros Paquetes</span>
                <h2 class="section-title" data-translate="servicesTitle">Experiencias dise√±adas para ti</h2>
                <p class="section-subtitle" data-translate="servicesSubtitle">Descubre lo mejor de Panam√°.</p>
            </div>

            <div class="services-grid" id="servicesContainer">
                <!-- Services loaded by JS -->
            </div>

            <div class="custom-tour-cta">
                <h3 data-translate="customTitle">¬øBuscas una experiencia √∫nica?</h3>
                <p data-translate="customDesc">Cu√©ntanos tus intereses y te armamos la experiencia perfecta.</p>
                <a href="https://wa.me/50765347412" id="customTour" class="btn btn-primary" target="_blank" rel="noopener noreferrer">
                    <i class="bx bx-edit"></i>
                    <span data-translate="customBtn">Dise√±a Tu Tour</span>
                </a>
            </div>
        </div>
    </section>

    <!-- GALER√çA -->
    <section class="section gallery" id="galeria">
        <div class="section-container">
            <div class="section-header">
                <span class="section-label" data-translate="galleryLabel">Galer√≠a</span>
                <h2 class="section-title" data-translate="galleryTitle">Galer√≠a</h2>
                <p class="section-subtitle" data-translate="gallerySubtitle">Descubre la magia de Panam√°.</p>
            </div>

            <div class="gallery-grid">
                <div class="gallery-item">
                    <img src="./image/gallery/imagen1.jpg" alt="Tour interior" width="240" height="220" loading="lazy">
                </div>
                <div class="gallery-item">
                    <img src="./image/gallery/imagen2.jpg" alt="Festival" width="240" height="220" loading="lazy">
                </div>
                <div class="gallery-item">
                    <img src="./image/gallery/imagen3.jpg" alt="Cultura" width="240" height="220" loading="lazy">
                </div>
                <div class="gallery-item">
                    <img src="./image/gallery/imagen4.jpg" alt="Canal" width="240" height="220" loading="lazy">
                </div>
                <div class="gallery-item">
                    <img src="./image/gallery/imagen5.jpg" alt="Isla Monos" width="240" height="220" loading="lazy">
                </div>
                <div class="gallery-item">
                    <img src="./image/gallery/imagen6.jpg" alt="Casco Viejo" width="240" height="220" loading="lazy">
                </div>
            </div>
        </div>
    </section>

    <!-- TESTIMONIOS - CON SISTEMA DE EVALUACI√ìN Y TRADUCCIONES COMPLETAS -->
    <section class="section testimonials" id="testimonios">
        <div class="section-container">
            <div class="section-header">
                <span class="section-label" data-translate="testimonialsLabel">Lo que dicen</span>
                <h2 class="section-title" data-translate="testimonialsTitle">Testimonios</h2>
                <!-- Subt√≠tulo con traducci√≥n -->
                <p class="section-subtitle" data-translate="testimonialsSubtitleReview">Deja tu comentario de tu experiencia con nosotros</p>
            </div>

            <div class="testimonials-grid-compact">
                <!-- Testimonio 1 -->
                <div class="testimonial-item">
                    <div class="testimonial-stars">
                        <span class="stars-display">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                    </div>
                    <div class="testimonial-content">
                        <p data-translate="testimonial1">"Pierre nos llev√≥ a Playa Blanca. Mi hija todav√≠a habla de las estrellas de mar. ¬°Aventura familiar inolvidable!"</p>
                    </div>
                    <div class="testimonial-author">
                        <img src="./image/testimonios/Usuario1.jpg" alt="Lady Rouse" width="40" height="40" loading="lazy">
                        <div class="author-info">
                            <strong>Lady Rouse</strong>
                            <span>üá∫üá∏ USA ‚Ä¢ Dic 2024</span>
                        </div>
                    </div>
                </div>

                <!-- Testimonio 2 -->
                <div class="testimonial-item">
                    <div class="testimonial-stars">
                        <span class="stars-display">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                    </div>
                    <div class="testimonial-content">
                        <p data-translate="testimonial2">"Conoce cada rinc√≥n y cuenta historias que no est√°n en las gu√≠as. El mejor ceviche de nuestras vidas. ¬°100% aut√©ntico!"</p>
                    </div>
                    <div class="testimonial-author">
                        <img src="./image/testimonios/Usuario2.jpg" alt="Anand Divekar" width="40" height="40" loading="lazy">
                        <div class="author-info">
                            <strong>Anand Divekar</strong>
                            <span>üáÆüá≥ India ‚Ä¢ Abr 2024</span>
                        </div>
                    </div>
                </div>

                <!-- Testimonio 3 -->
                <div class="testimonial-item">
                    <div class="testimonial-stars">
                        <span class="stars-display">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                    </div>
                    <div class="testimonial-content">
                        <p data-translate="testimonial3">"Llegu√© a las 11pm y Pierre estaba esperando. Kia impecable, agua fr√≠a, 25 minutos al hotel. Servicio de lujo a precio justo."</p>
                    </div>
                    <div class="testimonial-author">
                        <img src="./image/testimonios/Usuario3.jpg" alt="Juan Carlos Vargas" width="40" height="40" loading="lazy">
                        <div class="author-info">
                            <strong>Juan Carlos Vargas</strong>
                            <span>üá®üá¥ Colombia ‚Ä¢ Sep 2024</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CTA para dejar rese√±as - CON TRADUCCIONES -->
            <div class="testimonial-cta">
                <h3 data-translate="reviewCTATitle">¬øViajaste con nosotros?</h3>
                <p data-translate="reviewCTADesc">Comparte tu experiencia y ayuda a otros viajeros</p>
                <a href="https://wa.me/50765347412"
                   id="reviewWhatsApp"
                   class="btn btn-primary"
                   target="_blank"
                   rel="noopener noreferrer">
                    <i class="bx bx-star"></i>
                    <span data-translate="reviewCTAButton">Dejar tu rese√±a</span>
                </a>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section class="section faq-section">
        <div class="section-container">
            <div class="section-header">
                <h2 class="section-title" data-translate="faqTitle">Preguntas Frecuentes</h2>
            </div>

            <div class="faq-grid">
                <div class="faq-item">
                    <button class="faq-question" type="button">
                        <span data-translate="faqQ1">¬øC√≥mo hago la reserva?</span>
                        <i class="bx bx-plus faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p data-translate="faqA1">Escr√≠benos por WhatsApp, dinos qu√© tour quieres y tus fechas.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" type="button">
                        <span data-translate="faqQ2">¬øPuedo cancelar?</span>
                        <i class="bx bx-plus faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p data-translate="faqA2">S√≠. Cancela hasta 24h antes sin costo.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" type="button">
                        <span data-translate="faqQ3">¬øHablan ingl√©s?</span>
                        <i class="bx bx-plus faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p data-translate="faqA3">S√≠, Pierre es completamente biling√ºe.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" type="button">
                        <span data-translate="faqQ4">¬øQu√© veh√≠culo usan?</span>
                        <i class="bx bx-plus faq-icon"></i>
                    </button>
                    <div class="faq-answer">
                        <p data-translate="faqA4">Kia Sportage 2023/2024 con A/C.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA FINAL -->
    <section class="section final-cta">
        <div class="section-container">
            <div class="cta-content">
                <h2 data-translate="ctaFinalTitle">¬øListo para descubrir Panam√° como un local?</h2>
                <p data-translate="ctaFinalDesc">Reserva ahora y vive Panam√° de forma aut√©ntica.</p>
                <a href="https://wa.me/50765347412" id="ctaFinal" class="btn btn-primary btn-large" target="_blank" rel="noopener noreferrer">
                    <i class="bx bxl-whatsapp"></i>
                    <span data-translate="ctaFinalBtn">Reservar Ahora por WhatsApp</span>
                </a>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-brand">
                <img src="./image/logo.png" alt="PMF Tours Logo" width="140">
                <div class="footer-social">
                    <a href="https://www.instagram.com/pmftours/" target="_blank" rel="noopener noreferrer" aria-label="Instagram de PMF Tours" class="social-link">
                        <i class="bx bxl-instagram"></i>
                    </a>
                    <a href="https://wa.me/50765347412" id="footerContacto" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp de PMF Tours" class="social-link">
                        <i class="bx bxl-whatsapp"></i>
                    </a>
                </div>
            </div>

            <nav class="footer-nav">
                <a href="#inicio" data-translate="navHome">Inicio</a>
                <a href="#nosotros" data-translate="navAbout">Nosotros</a>
                <a href="#servicios" data-translate="navServices">Servicios</a>
                <a href="#galeria" data-translate="navGallery">Galer√≠a</a>
                <a href="#testimonios" data-translate="navTestimonials">Testimonios</a>
            </nav>
        </div>

        <div class="footer-copyright">
            <p>¬© PMF Tours - Panam√° <span id="current-year"></span></p>
        </div>
    </footer>

    <!-- PMF CAR ANIMATION - Solo visible en desktop -->
    <div id="pmfCar" class="pmf-car">
        <div class="car-container">
            <img src="./image/kia.png" alt="PMF Tours Kia Sportage" class="car-image" width="120">
            <div class="car-shadow"></div>
            <div class="speed-lines"></div>
        </div>
        <div class="car-tooltip">
            <i class="bx bx-map-pin"></i>
            <span data-translate="carTooltip">¬°Transporte seguro y confiable!</span>
        </div>
    </div>

    <!-- TOUR PROGRESS BAR - Solo visible en desktop -->
    <div class="tour-progress-bar">
        <div class="tour-progress-fill" id="tourProgress">
            <span class="progress-text"></span>
        </div>
    </div>

    <!-- WHATSAPP FLOTANTE - VISIBLE SIEMPRE -->
    <a href="https://wa.me/50765347412?text=¬°Hola%20Pierre!%20üëã%0A%0AQuiero%20informaci√≥n%20sobre%20PMF%20Tours.%20¬øMe%20ayudas?"
       class="floating-whatsapp"
       target="_blank"
       rel="noopener noreferrer"
       title="Contactar por WhatsApp"
       aria-label="Contactar por WhatsApp">
        <i class="bx bxl-whatsapp"></i>
    </a>

    <!-- SCRIPTS -->
    <!-- Year din√°mico -->
    <script>
        document.getElementById("current-year").textContent = new Date().getFullYear();
    </script>

    <!-- AOS - Solo en desktop -->
    <script>
        if (window.innerWidth > 768) {
            const aosScript = document.createElement('script');
            aosScript.src = 'https://unpkg.com/aos@2.3.4/dist/aos.js';
            aosScript.onload = function() {
                AOS.init({ duration: 800, once: true });
            };
            document.body.appendChild(aosScript);
        }
    </script>

    <!-- PMF CAR + SCROLL PROGRESS SYNC CON TRADUCCI√ìN -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const pmfCar = document.getElementById('pmfCar');
            const progressFill = document.getElementById('tourProgress');
            const progressText = progressFill ? progressFill.querySelector('.progress-text') : null;
            const isDesktop = window.innerWidth > 768;
            let carVisible = false;

            // Mostrar elementos solo en desktop
            if (isDesktop && pmfCar) {
                pmfCar.style.display = 'block';
            }
            if (isDesktop && document.querySelector('.tour-progress-bar')) {
                document.querySelector('.tour-progress-bar').style.display = 'block';
            }

            // Mensajes din√°micos multiidioma
            const messages = {
                es: [
                    "¬°Preparando tu aventura!",
                    "Panam√° te espera",
                    "Descubriendo lo aut√©ntico",
                    "¬°Casi llegamos!"
                ],
                en: [
                    "Getting ready for adventure!",
                    "Panama awaits you",
                    "Discovering authenticity",
                    "Almost there!"
                ]
            };

            // Funci√≥n para obtener idioma actual
            function getCurrentLanguage() {
                return localStorage.getItem('preferredLanguage') || 'es';
            }

            // Scroll handler - SOLO se ejecuta en desktop
            if (isDesktop) {
                window.addEventListener('scroll', () => {
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                    const scrollPercent = Math.min(100, Math.round((scrollTop / docHeight) * 100));

                    // Mostrar coche al scrollear > 15%
                    if (!carVisible && scrollPercent > 15 && pmfCar) {
                        pmfCar.classList.add('visible');
                        carVisible = true;
                    }

                    // Actualizar barra de progreso
                    if (progressFill) {
                        progressFill.style.width = `${scrollPercent}%`;
                        if (progressText) {
                            const currentLang = getCurrentLanguage();
                            const messageIndex = Math.min(3, Math.floor(scrollPercent / 25));
                            progressText.textContent = messages[currentLang][messageIndex];
                            progressText.style.display = scrollPercent > 5 ? 'block' : 'none';
                        }
                    }
                });
            }

            // Actualizar mensajes cuando cambie el idioma
            document.addEventListener('languageChanged', () => {
                if (isDesktop && progressText) {
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                    const scrollPercent = Math.min(100, Math.round((scrollTop / docHeight) * 100));
                    const currentLang = getCurrentLanguage();
                    const messageIndex = Math.min(3, Math.floor(scrollPercent / 25));
                    progressText.textContent = messages[currentLang][messageIndex];
                }
            });
        });
    </script>

    <!-- PMF BUNDLE - MAIN SCRIPT - Defer para mejor performance -->
    <script src="./js/pmf-bundle.js" defer></script>

    <!-- SERVICES LOADER CON TRADUCCI√ìN - Defer -->
    <script type="module" defer>
        let serviciosData = null;

        // ‚úÖ FUNCI√ìN PARA CONSTRUIR PRECIO
        function buildPriceHtml(service, currentLang) {
            // 1. RANGOS DE PRECIO (Beach, Airport, Interior)
            if (service.precioDesde !== undefined && service.precioHasta !== undefined) {
                const precioDisplay = typeof service.precioDisplay === 'object'
                    ? service.precioDisplay[currentLang]
                    : service.precioDisplay;
                return `<div class="price">${precioDisplay}</div>`;
            }

            // 2. PRECIO FIJO (City Tour, Cultural)
            if (service.precio !== undefined) {
                const precioDisplay = typeof service.precioDisplay === 'object'
                    ? service.precioDisplay[currentLang]
                    : `$${service.precio} USD`;
                return `<div class="price">${precioDisplay}</div>`;
            }

            // 3. FALLBACK
            return `<div class="price">Consultar</div>`;
        }

        // ‚úÖ FUNCI√ìN PARA CONSTRUIR CARD
        function buildServiceCard(service, currentLang, textos) {
            const nombre = typeof service.nombre === 'object' ? service.nombre[currentLang] : service.nombre;
            const descripcion = typeof service.descripcion === 'object' ? service.descripcion[currentLang] : service.descripcion;

            let badge = '';
            if (service.badge) {
                badge = typeof service.badge === 'object' ? service.badge[currentLang] : service.badge;
            }

            const incluye = typeof service.incluye === 'object' && Array.isArray(service.incluye[currentLang])
                ? service.incluye[currentLang]
                : service.incluye;

            const whatsappUrl = typeof service.whatsappUrl === 'object' ? service.whatsappUrl[currentLang] : service.whatsappUrl;

            const badgeHtml = badge ? `<div class="badge ${service.badgeClass}">${badge}</div>` : '';
            const featuresHtml = Array.isArray(incluye) ? incluye.map(item => `<li>${item}</li>`).join('') : '';
            const priceHtml = buildPriceHtml(service, currentLang);  // ‚úÖ AGREGAR

            return `
                <div class="service-card">
                    <div class="service-image">
                        <img src="${service.imagen}" alt="${nombre}" loading="lazy" width="260" height="240">
                        ${badgeHtml}
                    </div>
                    <div class="service-content">
                        <h3>${nombre}</h3>
                        <p>${descripcion}</p>
                        <ul class="features">${featuresHtml}</ul>
                        ${priceHtml}
                        <a href="${whatsappUrl}" class="btn btn-service" target="_blank" rel="noopener noreferrer">
                            ${textos.reservar_ahora}
                        </a>
                    </div>
                </div>
            `;
        }

        async function loadServices() {
            try {
                if (!serviciosData) {
                    const response = await fetch('./data/precios.json');
                    serviciosData = await response.json();
                }

                const currentLang = localStorage.getItem('preferredLanguage') || 'es';
                const textos = serviciosData.textos_interfaz[currentLang];
                const container = document.getElementById('servicesContainer');

                if (!container) return;

                container.innerHTML = serviciosData.servicios.map(service =>
                    buildServiceCard(service, currentLang, textos)
                ).join('');
            } catch (error) {
                console.error('Error loading services:', error);
            }
        }

        document.addEventListener('languageChanged', loadServices);
        document.addEventListener('DOMContentLoaded', loadServices);
    </script>
</body>
</html><!-- Cache purge: 01/15/2026 16:17:20 -->
<!-- Force rebuild: 2026-01-15 16:21:59 -->
